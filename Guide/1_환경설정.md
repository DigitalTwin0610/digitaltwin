# EmoLamp 환경설정 가이드

## 1. 필요한 프로그램 설치

### 1.1 Unity 설치
- **버전**: Unity 2022.3 LTS (이미 설치됨)
- **확인**: Unity Hub에서 2022.3.x 버전 확인

### 1.2 Arduino IDE 설치
- **다운로드**: https://www.arduino.cc/en/software
- **버전**: 2.x 권장
- **보드 설정**: Arduino Mega or Mega 2560

### 1.3 Node.js 설치 (Cloudtype 로컬 테스트용)
- **다운로드**: https://nodejs.org/
- **버전**: 18.x LTS

---

## 2. API 키 준비 (4개)

### 2.1 보유 중인 API 키
```
Claude API: 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
OpenWeatherMap: b4be92e16edb175203f2b6126b008cd0
Firebase URL: https://emolamp-default-rtdb.firebaseio.com/
Cloudtype: https://port-0-motorcontrol-miqbz64b349f00ff.sel3.cloudtype.app
```

### 2.2 OpenWeatherMap API 키 발급 (이미 완료)
1. https://openweathermap.org/api 접속
2. Sign Up → 무료 계정 생성
3. API Keys 탭에서 키 복사
4. **무료 티어**: 1,000 calls/day

### 2.3 Firebase 프로젝트 생성 (이미 완료)
1. https://console.firebase.google.com/ 접속
2. 프로젝트 추가 → "EmoLamp" 입력
3. Realtime Database → 데이터베이스 만들기
4. **테스트 모드**로 시작 (보안 규칙 나중에 설정)
5. 프로젝트 설정 → 웹 앱 추가 → Config 복사:
```javascript
const firebaseConfig = {
  apiKey: "YOUR_API_KEY",
  authDomain: "emolamp-xxxxx.firebaseapp.com",
  databaseURL: "https://emolamp-xxxxx-default-rtdb.firebaseio.com",
  projectId: "emolamp-xxxxx",
  storageBucket: "emolamp-xxxxx.appspot.com",
  messagingSenderId: "123456789",
  appId: "1:123456789:web:abcdef123456"
};
```

---

## 3. Unity 패키지 설치

### 3.1 필수 패키지 (Package Manager)
Window → Package Manager에서 설치:

| 패키지 | 용도 |
|--------|------|
| TextMeshPro | UI 텍스트 |
| Newtonsoft Json | JSON 파싱 |

### 3.2 Newtonsoft Json 설치 방법
1. Package Manager 열기
2. + 버튼 → Add package by name
3. `com.unity.nuget.newtonsoft-json` 입력
4. Add 클릭

### 3.3 SerialPort 활성화
1. Edit → Project Settings → Player
2. Other Settings → Configuration
3. **Api Compatibility Level**: `.NET Framework` 선택
4. **Allow 'unsafe' Code**: 체크 (선택)

### 3.4 HTTP 허용 (API 호출용)
1. Edit → Project Settings → Player
2. Other Settings → Configuration
3. **Allow downloads over HTTP**: `Always allowed`

---

## 4. Cloudtype 설정

### 4.1 Cloudtype 계정
- 이미 보유: boongbang0425

### 4.2 새 프로젝트 생성
1. https://cloudtype.io/ 접속
2. 새 프로젝트 → GitHub 연결
3. Repository: `EmoLamp-Server` (새로 생성)
4. 런타임: Node.js 18

### 4.3 환경변수 설정 (Cloudtype 대시보드)
```
PORT=3000
NODE_ENV=production
```

---

## 5. Arduino 라이브러리

Arduino IDE에서 설치 필요 없음 (기본 라이브러리만 사용)

---

## 6. 폴더 구조 (Unity 프로젝트)

```
Assets/
├── Scripts/
│   ├── API/
│   │   ├── WeatherManager.cs
│   │   ├── ClaudeManager.cs
│   │   ├── FirebaseManager.cs
│   │   └── MQTTManager.cs
│   ├── Core/
│   │   ├── HSVController.cs
│   │   ├── LampController.cs
│   │   ├── BackgroundController.cs
│   │   └── SerialController.cs
│   └── UI/
│       └── UIManager.cs
├── Materials/
│   └── BulbEmission.mat
├── Prefabs/
└── Scenes/
    └── Main.unity
```

---

## 7. 환경변수 파일 (Unity용)

Assets 폴더에 `config.json` 생성:
```json
{
  "claudeApiKey": "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",
  "openWeatherApiKey": "b4be92e16edb175203f2b6126b008cd0",
  "firebaseUrl": "https://emolamp-default-rtdb.firebaseio.com/",
  "mqttServerUrl": "https://port-0-motorcontrol-miqbz64b349f00ff.sel3.cloudtype.app",
  "cityName": "Seoul"
}
```

⚠️ **주의**: 이 파일은 .gitignore에 추가하여 GitHub에 올리지 마세요!

---

## 8. 체크리스트

### 설치 확인
- [x] Unity 2022.3 LTS
- [ ] Arduino IDE
- [ ] Node.js 18

### API 키 확인 (모두 완료!)
- [x] Claude API
- [x] OpenWeatherMap
- [x] Firebase
- [x] Cloudtype 서버

### Unity 설정
- [ ] .NET Framework 설정
- [ ] HTTP 허용
- [ ] Newtonsoft Json 패키지

### Cloudtype
- [x] 프로젝트 생성
- [x] 배포 완료

---

다음 단계: `2_Unity가이드.md` 참고