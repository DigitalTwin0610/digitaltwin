# EmoLamp 회로 연결 가이드

## 1. 필요한 부품ㄹ

| 부품 | 수량 | 용도 | 보유 확인 |
|------|------|------|----------|
| Keyestudio MEGA 2560 | 1개 | 메인 보드 | ✅ |
| RGB LED (Common Cathode) | 1개 | 색상 출력 | ✅ |
| 조도센서 (TEMT6000) | 1개 | 밝기 감지 | ✅ |
| 220Ω 저항 | 3개 | LED 보호 | ✅ |
| 점퍼선 | 여러 개 | 연결용 | ✅ |
| USB 케이블 | 1개 | PC 연결 | ✅ |

---

## 2. RGB LED 이해하기

### Common Cathode vs Common Anode
```
Common Cathode (일반적):
- 긴 다리(GND)를 GND에 연결
- R, G, B 핀에 HIGH를 주면 켜짐
- 우리가 사용할 타입!

Common Anode:
- 긴 다리(VCC)를 5V에 연결
- R, G, B 핀에 LOW를 주면 켜짐
```

### RGB LED 핀 순서 (일반적)
```
앞에서 보았을 때 (평평한 면이 아래):

    ┌───────┐
    │ LED   │
    │ 렌즈  │
    └───┬───┘
      │││││
      RGBGR
       ││││
       Red│Blue
          │
          Green (가장 긴 다리 = GND 또는 VCC)

* 제조사마다 다를 수 있으니 데이터시트 확인!
```

---

## 3. 회로 연결도

### 텍스트 다이어그램
```
Keyestudio MEGA 2560
        │
        │
        ├──── D9  ────[220Ω]────┐
        │                       │
        ├──── D10 ────[220Ω]────┼──── RGB LED
        │                       │
        ├──── D11 ────[220Ω]────┘
        │                       │
        ├──── GND ──────────────┘ (긴 다리)
        │
        │
        ├──── A0  ──────────────── TEMT6000 (OUT/SIG)
        │
        ├──── 5V  ──────────────── TEMT6000 (VCC/+)
        │
        └──── GND ──────────────── TEMT6000 (GND/-)
```

### 상세 연결표

#### RGB LED 연결
| LED 핀 | 저항 | Arduino 핀 | 설명 |
|--------|------|-----------|------|
| R (빨강) | 220Ω | D9 | PWM 제어 |
| G (초록) | 220Ω | D10 | PWM 제어 |
| B (파랑) | 220Ω | D11 | PWM 제어 |
| GND (긴다리) | 없음 | GND | 공통 접지 |

#### 조도센서 (TEMT6000) 연결
| 센서 핀 | Arduino 핀 | 설명 |
|---------|-----------|------|
| VCC (+) | 5V | 전원 |
| GND (-) | GND | 접지 |
| OUT (SIG) | A0 | 아날로그 입력 |

---

## 4. 단계별 연결 방법

### Step 1: RGB LED 연결

```
1. RGB LED를 브레드보드에 꽂습니다
   - 가장 긴 다리가 GND (Common Cathode의 경우)

2. 저항 3개를 연결합니다
   - 각 R, G, B 다리에 220Ω 저항 연결

3. 점퍼선으로 Arduino에 연결
   - 저항 → D9 (Red)
   - 저항 → D10 (Green)  
   - 저항 → D11 (Blue)
   - 긴 다리 → GND
```

### Step 2: 조도센서 연결

```
1. TEMT6000 센서를 브레드보드에 꽂습니다
   - 3핀: VCC, GND, OUT

2. 점퍼선으로 Arduino에 연결
   - VCC → 5V
   - GND → GND
   - OUT → A0
```

### Step 3: USB 연결

```
1. USB 케이블로 MEGA 2560과 PC 연결
2. 장치관리자에서 COM 포트 확인
   - "USB-SERIAL CH340" 또는 유사한 이름
3. COM 포트 번호 기억 (예: COM3)
```

---

## 5. 브레드보드 레이아웃

```
    1  2  3  4  5  6  7  8  9  10 11 12 13 14 15
   ┌──────────────────────────────────────────────┐
   │ +  +  +  +  +  +  +  +  +  +  +  +  +  +  + │ ← 5V 레일
   ├──────────────────────────────────────────────┤
 A │                   [R1]      [TEMT]           │
 B │                   [R2]      [6000]           │
 C │                   [R3]                       │
 D │                [RGB LED]                     │
 E │                   │                          │
   ├──────────────────────────────────────────────┤
   │ -  -  -  -  -  -  -  -  -  -  -  -  -  -  - │ ← GND 레일
   └──────────────────────────────────────────────┘

점퍼선:
- 5V 레일 → Arduino 5V
- GND 레일 → Arduino GND
- R1 반대쪽 → D9
- R2 반대쪽 → D10
- R3 반대쪽 → D11
- RGB LED GND → GND 레일
- TEMT OUT → A0
```

---

## 6. 연결 확인 체크리스트

### LED 테스트
```
□ D9에 HIGH → 빨간불만 켜짐
□ D10에 HIGH → 초록불만 켜짐
□ D11에 HIGH → 파란불만 켜짐
□ 모두 HIGH → 흰색 (또는 밝은 색)
```

### 센서 테스트
```
□ 밝은 곳: A0 값이 높음 (500~1000)
□ 어두운 곳: A0 값이 낮음 (0~200)
□ 손으로 가리면 값이 떨어짐
```

---

## 7. 문제 해결

### LED가 안 켜져요
```
1. LED 방향 확인 (긴 다리가 GND?)
2. 저항 연결 확인
3. 핀 번호 확인 (D9, D10, D11)
4. LED 불량일 수 있음 → 다른 LED로 테스트
```

### 색상이 이상해요
```
1. R, G, B 핀 순서가 바뀌었을 수 있음
2. 코드에서 핀 번호 수정하거나
3. 물리적으로 점퍼선 위치 변경
```

### 조도 센서값이 안 변해요
```
1. VCC, GND 연결 확인
2. OUT이 A0에 연결되었는지 확인
3. 센서 위에 손을 대고 테스트
```

### Serial 통신이 안 돼요
```
1. COM 포트 번호 확인 (장치관리자)
2. 보드레이트 확인 (9600)
3. USB 케이블 불량 → 다른 케이블로 테스트
4. Unity에서 Serial Monitor 닫기
```

---

## 8. 3D 프린트 램프에 LED 장착

### 방법 1: LED를 전구 위치에 고정
```
1. RGB LED를 램프 헤드 안쪽에 위치
2. 글루건이나 테이프로 고정
3. 전선은 램프 몸체를 따라 배선
```

### 방법 2: LED Strip 사용 (선택)
```
1. WS2812B LED Strip을 전구 주변에 감기
2. 더 밝고 화려한 효과
3. 코드 수정 필요 (FastLED 라이브러리)
```

---

## 9. 최종 연결 사진 참고 (예시)

```
┌─────────────────────────────────────────────┐
│                                             │
│         [Luxo Jr. 램프]                     │
│              │                              │
│              │ (LED 위치)                   │
│              ▼                              │
│         ┌─────────┐                         │
│         │ RGB LED │                         │
│         └────┬────┘                         │
│              │                              │
│     ┌────────┼────────┐                     │
│     │  점퍼선 (3색)   │                     │
│     │        │        │                     │
│     ▼        ▼        ▼                     │
│   ┌─────────────────────┐                   │
│   │   Arduino MEGA      │                   │
│   │   2560              │◀── USB ── PC     │
│   └─────────────────────┘                   │
│         ▲                                   │
│         │                                   │
│     ┌───┴───┐                               │
│     │TEMT   │ (조도센서)                    │
│     │6000   │                               │
│     └───────┘                               │
│                                             │
└─────────────────────────────────────────────┘
```

---

## 10. 다음 단계

1. 회로 연결 완료
2. Arduino IDE에서 코드 업로드
3. Serial Monitor로 테스트
4. Unity 프로젝트 실행
5. 연결 확인!

문제가 있으면 하나씩 분리해서 테스트하세요:
- LED만 테스트
- 센서만 테스트
- Serial 통신만 테스트